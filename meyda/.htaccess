# Apache Configuration for MeyDa Collection
# Optimized for AlwaysData Deployment

RewriteEngine On
RewriteBase /

# 1. HIDE .PHP EXTENSION
# Redirect direct .php requests back to clean URLs (e.g., login.php -> login)
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R=301,L]

# 2. INTERNAL REWRITE
# Internally map a clean URL to its .php file (if it exists and is not a directory)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*?)/?$ $1.php [L]

# 3. DIRECTORY DEFAULTS
DirectoryIndex index.php

# 4. SECURITY & PERFORMANCES
# Prevent directory listing
Options -Indexes

# Prevent access to configuration/sensitive files
<FilesMatch "^\.|\.php$|config\.php|auth\.php">
    # Note: We don't want to block .php entirely as they need to run, 
    # but we want to prevent direct raw access if possible in some environments.
    # Usually, a simple protection for specific files is safer:
</FilesMatch>

<Files "config.php">
    Order Allow,Deny
    Deny from all
</Files>
<Files "auth.php">
    Order Allow,Deny
    Deny from all
</Files>
